{"componentChunkName":"component---src-templates-post-template-js","path":"/02_Whats_a_Job_Batch_Pipeline","result":{"data":{"markdownRemark":{"fields":{"slug":"/02_Whats_a_Job_Batch_Pipeline"},"id":"caebf4ab-0935-5b25-8d88-5b0caaca0707","html":"<p>A quick guide on the GNJ models.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d25ebfe649a91e67dff761f7ddb11be4/cda19/models-schema.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 39.86486486486486%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAACLElEQVQoz02SS2/TQBSFB5IlhDUsKoHYFBZsWtjxP1jSbvgllWi7qJDYlA2LSlCkgoTSJk3i0DyMY3tsz4zteOw8aufZpJVgh5TEvkygSIz0aa7OSOeeezXoQ0F/cHTGDg/l80fH3110Ijs3d7feIABA1RJ5XC2xpzWJrVVLdP1/zopkvV62RU3WahJ9VjxWH077C4RK+exK7Vth31VLLz7mK6gssVSlSFClaL00G13w6MXMNYfzpjWaN8no7y3w6Hh+rc88Ml645uCXXLafI6d8sBrUPlkDM/vlYP8zUqrdFMFTZDSiPUdrwsSpLK58CzgZgs8mgkvwyTmEWIKfbSz03lKLOR0DlluvUP5rfbVSwMrZKZaknH7//bsj5JIfyGz0XgcWh8DV54OAJj6JEs4miUenSZe1E4rryahNEt/sJB6bzkVK0OVgA5Vy+oqUw3vlvLFTzuN7O1tvkWNeIkOJtgPiA6Z0zh2WtGkfAjYVXEFod0EzLPCbNrStbiK0xbXhJlIqHDE8QLZAq3FE9Sht44lIGG37IqGMzRl37JgYrdiwBrFm9MV4fizrZsw9N7Z1L9at4XK/y5E3/5gE9jQt9pNWRe0YgxQThlgJd1u0BdzGEHk2qCoH1YygrnbAFbpr6dDjFExt2TQETi9Ar/kb6PatDPp3Mpk7SJjeaFR98WXYE0tpK0xxKVGaFtNCwtSQ2FpESKNLWMMlRHEJ1ULxFjmm0jk5zSp3fwN90dsWx/IsrQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Alt text\"\n        title=\"Alt text\"\n        src=\"/static/d25ebfe649a91e67dff761f7ddb11be4/fcda8/models-schema.png\"\n        srcset=\"/static/d25ebfe649a91e67dff761f7ddb11be4/12f09/models-schema.png 148w,\n/static/d25ebfe649a91e67dff761f7ddb11be4/e4a3f/models-schema.png 295w,\n/static/d25ebfe649a91e67dff761f7ddb11be4/fcda8/models-schema.png 590w,\n/static/d25ebfe649a91e67dff761f7ddb11be4/cda19/models-schema.png 785w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n<em>A representation of the most complex use case in GNJ.</em></p>\n<hr>\n<p>Quick sum-up :</p>\n<ul>\n<li>Jobs are <strong>dispatched</strong> sequentially but can be <strong>run in parallel</strong>.</li>\n<li>Jobs inside a Pipeline are <strong>dispatched</strong> AND <strong>executed</strong> sequentially.</li>\n<li>Jobs inside a Pipeline linked to a batch are <strong>dispatched</strong> sequentially but <strong>run in parallel</strong>.</li>\n</ul>\n<hr>\n<h2 id=\"the-job\" style=\"position:relative;\"><a href=\"#the-job\" aria-label=\"the job permalink\" class=\"post-toc-anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The job</h2>\n<p>Jobs are the most important part of GNJ. They represent the execution of a type of task.</p>\n<p>Your workers can query GNJ to fetch jobs of one or more type to be executed.</p>\n<p>They are DISPATCHED <strong>sequentially</strong>. When a worker is asking for something to perform, they are returned in a <strong>FIFO</strong> way.</p>\n<p>Yet, they are only \"dispatched\" sequentially, not executed. So if you have two workers processing jobs at the same time. The worker 1 (W1) will receive the Job 1 (J1) before the worker 2 (W2) will receive the job 2 (J2). But if W2 executes the job faster that W1, J1 will be done before J2 is done.</p>\n<p>If you need to execute J2 <strong>after</strong> J1 is done and not before, you can simply insert J2 in the queue at the end of J1. It's the recommended way.</p>\n<p>Another alternative, is to assign only one worker to a type of job. Then you can make sure that J2 will be only executed after J1 if they share the same type.</p>\n<p>The last option, that we do not recommend if the two lasts options are not possible, is to create a pipeline.</p>\n<hr>\n<h2 id=\"the-pipeline\" style=\"position:relative;\"><a href=\"#the-pipeline\" aria-label=\"the pipeline permalink\" class=\"post-toc-anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The pipeline</h2>\n<p>When jobs must be created in advance, for exemple if they must be reviewed/validated by an humain before being started, and when you want to <strong>execute</strong> them <strong>sequentially</strong>, you must create a pipeline.</p>\n<p>A pipeline will ensure that:</p>\n<ul>\n<li>Jobs inside the pipeline must be executed sequentially</li>\n<li>\n<p>The jobs are still provided as a FIFO list, so create them accordingly</p>\n<ul>\n<li>A way to sort jobs is currently is study.</li>\n</ul>\n</li>\n<li>If a job of the pipeline fails, the following jobs will never be executed</li>\n</ul>\n<hr>\n<h2 id=\"the-batch\" style=\"position:relative;\"><a href=\"#the-batch\" aria-label=\"the batch permalink\" class=\"post-toc-anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The batch</h2>\n<p>If you are using a pipeline, and a set of your jobs must be run in parallel, you will need to use the batches.</p>\n<p>A batch is a series of job, inside a pipeline, that will not be run sequentially.</p>\n<ul>\n<li>If any job of a batch fail, the batch is considered \"failed\"</li>\n<li>The pipeline of a failed batch will be considered as \"failed\"</li>\n<li>Job will stop being dispatched inside a pipeline as soon as it is \"failed\"</li>\n</ul>\n<p>Be careful, if you have only one worker in charge of the batch's jobs, it will have no effect and they will still run sequentially.</p>","frontmatter":{"date":null,"title":"What's a Job/Batch/Pipeline","sidebar":"Documentation","showTitle":true,"hideAnchor":false}}},"pageContext":{}},"staticQueryHashes":["1936182646","3649515864","582252603"]}